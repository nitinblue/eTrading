general:
  execution_mode: "paper"  # "mock", "paper", "live"

broker:
  data:  # Always live for market data
    client_secret: ${TASTYTRADE_CLIENT_SECRET_LIVE}
    refresh_token: ${TASTYTRADE_REFRESH_TOKEN_LIVE}
  paper:
    client_secret: ${TASTYTRADE_CLIENT_SECRET_PAPER}
    refresh_token: ${TASTYTRADE_REFRESH_TOKEN_PAPER}
  live:
    client_secret: ${TASTYTRADE_CLIENT_SECRET_LIVE}
    refresh_token: ${TASTYTRADE_REFRESH_TOKEN_LIVE}

risk:
  max_allocation_per_position: 0.05
  max_loss_per_trade: 0.002
  max_undefined_risk_allocation: 0.20
  reserved_margin_fraction: 0.20
  stop_loss_level: -0.1
  take_profit_level: 0.5
  max_strategy_concentration: 0.25
  greek_targets:
    delta_min: -0.10
    delta_max: 0.10

strategies:
  allocation_defined: 0.80
  allocation_undefined: 0.20
  orb_0dte:
      enabled: true
      underlying: "SPX"  # Or "SPY" for smaller size
      or_minutes: 30     # Opening range duration (30 or 60)
      breakout_candle_minutes: 5
      spread_width: 5    # Points between short/long strike
      min_credit: 1.50   # Minimum credit received
      max_risk_per_contract: 350
      quantity: 1 
      dry_run: true      # Set false for real trades
      profit_target_pct: 0.50  # Close at 50% profit
      stop_loss_multiplier: 2.0  # Close if loss = 2x credit
  
  wheel:
    enabled: true
    underlying: "MSFT"  # Spreadsheet input or list
    min_iv_rank: 40  # For entry
    max_dte: 45  # For options
    put_delta_target: -0.16  # OTM put for CSP
    call_delta_target: 0.16  # OTM call for CC
    min_premium: 1.50  # Min received for sell
    quantity: 1  # Contracts
    dry_run: true  # Set false for real trades
    state_file: "wheel_state.json"  # Persist state
    risk_allocation: 0.05  # % of capital per trade
    
  defined:
    iron_condor:
      name: "Iron Condor"
      description: "Sell OTM call spread + OTM put spread"
      min_iv_rank: 50
      max_dte: 60
      min_credit: 1.00
      max_risk_per_contract: 500
      min_liquidity: 1000000
      max_price: 500

    butterfly:
      name: "Butterfly"
      description: "Buy low strike, sell 2 middle, buy high strike"
      min_iv_rank: 40
      max_dte: 45
      wing_width: 10
      min_credit: 0.50
      min_liquidity: 500000

    credit_spread:
      name: "Bull Put / Bear Call Spread"
      description: "Vertical credit spread"
      min_iv_rank: 45
      max_dte: 45
      min_credit: 0.80
      min_liquidity: 800000

    calendar_spread:
      name: "Calendar Spread"
      description: "Sell near-term, buy far-term same strike"
      min_iv_rank: 30
      dte_short: 14
      dte_long: 45
      min_liquidity: 600000

    jade_lizard:
      name: "Jade Lizard"
      description: "Sell OTM put + OTM call spread (no upside risk)"
      min_iv_rank: 55
      max_dte: 45
      min_credit: 2.00

  undefined:
    short_strangle:
      name: "Short Strangle"
      description: "Sell OTM call + OTM put"
      min_iv_rank: 70
      max_dte: 60
      min_credit: 3.00
      min_liquidity: 2000000
      max_price: 300

    short_straddle:
      name: "Short Straddle"
      description: "Sell ATM call + put"
      min_iv_rank: 80
      max_dte: 30
      min_credit: 5.00
      min_liquidity: 3000000

    ratio_spread:
      name: "Ratio Spread"
      description: "Buy 1, sell 2 OTM (free or credit)"
      min_iv_rank: 60
      max_dte: 45
      min_credit: 0.00  # Can be free

technical:
  # General settings
  period: "2y"  # yfinance period for historical data (1d, 5d, 1mo, 3mo, 6mo, 1y, 2y, 5y, 10y, ytd, max)
  interval: "1d"  # yfinance interval (1m, 2m, 5m, 15m, 30m, 60m, 90m, 1h, 1d, 5d, 1wk, 1mo, 3mo)

  # Indicators to calculate (from TA-Lib)
  indicators:
    rsi:
      period: 14
      oversold: 30
      overbought: 70
    sma:
      short: 50
      long: 200
    ema:
      short: 12
      long: 26
    macd:
      fast: 12
      slow: 26
      signal: 9
    bollinger:
      period: 20
      std_dev: 2
    volume:
      ma_period: 20  # For volume MA
      spike_threshold: 2.0  # Volume > 2x MA = spike
    stoch:
      fastk_period: 14
      slowk_period: 3
      slowd_period: 3
      overbought: 80
      oversold: 20
    adx:
      period: 14
      threshold: 25  # >25 = strong trend

  # Phase detection thresholds
  phase_thresholds:
    consolidation_rsi_low: 40
    consolidation_rsi_high: 60
    accumulation_rsi: 30
    distribution_rsi: 70
    trend_strength_adx: 25  # >25 = trending, <25 = ranging

  # Support/Resistance/Order Block
  support_resistance:
    lookback: 20  # Days for rolling min/max
    order_block_lookback: 50  # Days for mode (most frequent price)

  # Signal thresholds for entry (bullish/bearish/neutral)
  signals:
    bullish:
      rsi_max: 30  # RSI < 30 = oversold
      sma_short_above_long: true  # SMA50 > SMA200
      macd_cross_up: true
      adx_above: 25
    bearish:
      rsi_min: 70  # RSI > 70 = overbought
      sma_short_below_long: true
      macd_cross_down: true
      adx_above: 25
    neutral:
      rsi_range: [40, 60]
      adx_below: 25  # Ranging market

  # Volume Profile Settings
  volume_profile:
    bins: 20  # Number of price bins
    lookback: 100  # Days for profile

sheets: 
  sheet_id: ${GOOGLE_SHEET_ID} 
  worksheet_name: "Options"            
  service_account_file: "service_account.json"  # Path to JSON key
